{
  "hash": "a5e62fd1921e141233df84d1f7b9c8c8",
  "result": {
    "markdown": "---\ntitle: \"Data Wrangling\"\nauthor: \"Tommy Weber\"\n---\n\n\n## Add Libraries\n\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-1_ef74785f75e1adf8ee4a9d51827fc24b'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(vroom)\nlibrary(data.table)\n```\n:::\n\n\n## Import data\n\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-2_ec90c33487dd6514896cd2ef5db53dbd'}\n\n```{.r .cell-code}\n# Assgignee data\nassignee_col_types <- list(\n  id = col_character(),\n  type = col_character(),\n  organization = col_character()\n)\n\nassignee_tbl <- vroom(\n            file       = \"../../../patent_data_reduced/assignee.tsv\", \n            delim      = \"\\t\", \n            col_types  = assignee_col_types,\n            na         = c(\"\", \"NA\", \"NULL\")\n        )\n\nsetDT(assignee_tbl)\n\n\n# Patent assignee data\npatent_assignee_col_types <- list(\n  patent_id = col_character(),\n  assignee_id = col_character()\n)\n\npatent_assignee_tbl <- vroom(\n            file       = \"../../../patent_data_reduced/patent_assignee.tsv\", \n            delim      = \"\\t\", \n            col_types  = patent_assignee_col_types,\n            na         = c(\"\", \"NA\", \"NULL\")\n        )\n\nsetDT(patent_assignee_tbl)\n\n\n# Patent data\npatent_col_types <- list(\n  id = col_character(),\n  date = col_date(\"%Y-%m-%d\"),\n  num_claims = col_integer()\n)\n\npatent_tbl <- vroom(\n            file       = \"../../../patent_data_reduced/patent.tsv\", \n            delim      = \"\\t\", \n            col_types  = patent_col_types,\n            na         = c(\"\", \"NA\", \"NULL\")\n        )\n\nsetDT(patent_tbl)\n\n\n# USPC data\nuspc_col_types <- list(\n  patent_id = col_character(),\n  mainclass_id = col_character(),\n  sequence = col_integer()\n)\n\nuspc_tbl <- vroom(\n            file       = \"../../../patent_data_reduced/uspc.tsv\", \n            delim      = \"\\t\", \n            col_types  = uspc_col_types,\n            na         = c(\"\", \"NA\", \"NULL\")\n        )\n\nsetDT(uspc_tbl)\n```\n:::\n\n\n## Combine the Patent Data\n\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-3_89f416d2399a6682ce955bd314975c1a'}\n\n```{.r .cell-code}\n# Important to note:\n# It seems possible to have multiple assignees per patent.\n\ncombined_patent_data <- merge(x = patent_assignee_tbl, y = assignee_tbl, \n                       by.x = \"assignee_id\",\n                       by.y = \"id\",\n                       all = FALSE)\n\ncombined_patent_data <- merge(x = combined_patent_data, y = patent_tbl,\n                       by.x = \"patent_id\",\n                       by.y = \"id\",\n                       all.x = FALSE,\n                       # There seem to be patents without an assignee\n                       all.y = TRUE)\n```\n:::\n\n\n## Combine the USPC Data\n\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-4_0a903c1e3935a8050ff5a80260b4e4b1'}\n\n```{.r .cell-code}\n# Important to notes\n# There seem to be multiple patent classifications per patent.\n\ncombined_uspc_data <- merge(x = patent_assignee_tbl, y = assignee_tbl, \n                       by.x = \"assignee_id\",\n                       by.y = \"id\",\n                       all = FALSE)\n\ncombined_uspc_data <- merge(x = combined_uspc_data, y = uspc_tbl,\n                       by = \"patent_id\",\n                       all.x = TRUE,\n                       # There seem to be patents without a classification.\n                       all.y = FALSE)\n```\n:::\n\n\n## US Patent Dominance\n\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-5_16c28c9327bfb499e76f2c80558548f3'}\n\n```{.r .cell-code}\ncombined_patent_data[\n  !is.na(organization) & type == \"2\",\n  .N, by = .(organization)][order(-N)] %>% \n  head(10)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"organization\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"N\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"International Business Machines Corporation\",\"2\":\"7547\"},{\"1\":\"Microsoft Corporation\",\"2\":\"3165\"},{\"1\":\"Google Inc.\",\"2\":\"2668\"},{\"1\":\"QUALCOMM Incorporated\",\"2\":\"2597\"},{\"1\":\"Apple Inc.\",\"2\":\"2201\"},{\"1\":\"General Electric Company\",\"2\":\"1873\"},{\"1\":\"Hewlett-Packard Development Company, L.P.\",\"2\":\"1638\"},{\"1\":\"AT&T INTELLECTUAL PROPERTY I, L.P.\",\"2\":\"1625\"},{\"1\":\"Intel Corporation\",\"2\":\"1616\"},{\"1\":\"GM Global Technology Operations LLC\",\"2\":\"1533\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n## US Patent Activity for August\n\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-6_59442e7aaba105182eea7a43fd66b051'}\n\n```{.r .cell-code}\ncombined_patent_data[\n  !is.na(organization) & type == \"2\" & lubridate::month(date, label = T) == \"Aug\",\n  .N, \n  by = .(organization)][order(-N)] %>% head(10)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"organization\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"N\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"International Business Machines Corporation\",\"2\":\"718\"},{\"1\":\"Microsoft Corporation\",\"2\":\"337\"},{\"1\":\"Google Inc.\",\"2\":\"240\"},{\"1\":\"QUALCOMM Incorporated\",\"2\":\"223\"},{\"1\":\"Apple Inc.\",\"2\":\"222\"},{\"1\":\"Intel Corporation\",\"2\":\"159\"},{\"1\":\"General Electric Company\",\"2\":\"148\"},{\"1\":\"AT&T INTELLECTUAL PROPERTY I, L.P.\",\"2\":\"146\"},{\"1\":\"Hewlett-Packard Development Company, L.P.\",\"2\":\"140\"},{\"1\":\"GM Global Technology Operations LLC\",\"2\":\"138\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n## Most innovative Sector worldwide\n\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-7_96cf4f3a1943f129ca4dda4d4fd05bc1'}\n\n```{.r .cell-code}\ntop_organization_vect <- \n  combined_uspc_data[\n    !is.na(organization), .N, by = .(organization)][\n      order(-N)][\n        1:10, c(organization)]\n\ncombined_uspc_data[\n  !is.na(mainclass_id) & organization %in% top_organization_vect, \n  .N, \n  by = mainclass_id][\n    order(-N)][1:10]\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"mainclass_id\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"N\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"257\",\"2\":\"7979\"},{\"1\":\"455\",\"2\":\"6191\"},{\"1\":\"370\",\"2\":\"5483\"},{\"1\":\"348\",\"2\":\"4113\"},{\"1\":\"709\",\"2\":\"4018\"},{\"1\":\"438\",\"2\":\"4004\"},{\"1\":\"715\",\"2\":\"3142\"},{\"1\":\"707\",\"2\":\"3140\"},{\"1\":\"345\",\"2\":\"2953\"},{\"1\":\"375\",\"2\":\"2601\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}